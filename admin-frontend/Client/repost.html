<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Báo cáo & Thống kê</title>
    <link rel="stylesheet" href="./css/style_base.css">
    <link rel="stylesheet" href="./css/repost.css">
</head>

<body>
    <div class="dashboard-wrapper">

        <div id="sidebar-placeholder"></div>

        <div class="main-content-area">

            <header class="top-header">
                <div class="page-title">
                    <h1>Báo cáo & Thống kê</h1>
                    <p>Theo dõi hiệu suất doanh thu, sân và khách hàng.</p>
                </div>
                <div class="user-profile">
                    <div class="profile-avatar">Admin</div>
                </div>
            </header>

            <section class="card filter-card">
                <div class="filter-controls">

                    <div class="form-group filter-group">
                        <label for="filter-type">Lọc theo:</label>
                        <select id="filter-type">
                            <option value="none" selected>-- Chọn kiểu lọc --</option>
                            <option value="date">Ngày</option>
                            <option value="week">Tuần</option>
                            <option value="month">Tháng</option>
                        </select>
                    </div>

                    <div class="form-group filter-group">
                        <label for="filter-venue">Khu vực:</label>
                        <select id="filter-venue">
                            <option value="all">Tất cả</option>
                        </select>
                    </div>

                    <div class="form-group filter-group hidden date-group" id="filter-date">
                        <label>Chọn ngày:</label>
                        <div class="date-range-inputs">
                            <input type="date" id="date-from">
                            <input type="date" id="date-to">
                        </div>
                    </div>

                    <div class="form-group filter-group hidden" id="filter-week">
                        <label for="week-select">Chọn tuần:</label>
                        <input type="week" id="week-select">
                    </div>

                    <div class="form-group filter-group hidden" id="filter-month">
                        <label for="month-select">Chọn tháng:</label>
                        <input type="month" id="month-select">
                    </div>

                    <button class="action-btn primary-btn" id="btn-refresh">Lọc</button>
                </div>
            </section>

            <!-- KPI -->
            <section class="kpi-container summary-kpi">
                <div class="kpi-card income-kpi">
                    <span class="kpi-icon"></span>
                    <div>
                        <div class="kpi-title">Tổng Doanh Thu</div>
                        <div class="kpi-value" id="total-money">0 đ</div>
                        <div class="kpi-subtext growth">Cập nhật theo bộ lọc</div>
                    </div>
                </div>

                <div class="kpi-card bookings-kpi">
                    <span class="kpi-icon"></span>
                    <div>
                        <div class="kpi-title">Tổng Số Giờ</div>
                        <div class="kpi-value" id="total-hours">0</div>
                        <div class="kpi-subtext">Tính từ dữ liệu booking</div>
                    </div>
                </div>
                <!-- ⭐ THÊM MỚI: Tổng đơn thành công -->
                <div class="kpi-card success-kpi">
                    <span class="kpi-icon"></span>
                    <div>
                        <div class="kpi-title">Đơn Thành Công</div>
                        <div class="kpi-value" id="total-success">0</div>
                        <div class="kpi-subtext">Đơn có trạng thái "hoàn thành"</div>
                    </div>
                </div>


            </section>

            <!-- BẢNG DỮ LIỆU CHI TIẾT -->
            <section class="card detailed-data-card">
                <h3>Danh sách booking</h3>

                <div class="table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Mã Đơn</th>
                                <th>Email</th>
                                <th>Trạng thái</th>
                                <th>Khu vực</th>
                                <th>Ngày tạo</th>
                                <th>Giờ bắt đầu</th>
                                <th>Giờ kết thúc</th>
                                <th>Số giờ</th>
                                <th>Thành tiền</th>
                            </tr>
                        </thead>

                        <!-- Bổ sung đúng ID để render từ JS -->
                        <tbody id="table-body">
                            <tr>
                                <td colspan="9" style="text-align: center;">Đang tải dữ liệu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            <div id="week-label" class="sub-label"></div>
            <div id="month-label" class="sub-label"></div>

        </div>
    </div>
   
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="./js/loadSliderBar.js"></script>
    <script src="./js/client_config.js"></script>
    <script src="./js/repost.js"></script>

</body>

</html>